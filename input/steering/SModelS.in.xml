<?xml version="1.0" encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="style/InputFile.xsl"?>

<InputFile>

    <VerbosityLevel>INFO</VerbosityLevel>
    <RandomSeed>0</RandomSeed>
    
    <Model>

        <ModelBase>

            <Name>MSSM</Name>

            <ModelParameter>
                <Name>Minput</Name>
                <Value>1000</Value>
                <Error>1</Error>
                <LowerBound>0</LowerBound>
                <UpperBound>10000</UpperBound>
                <Fixed>true</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>M1</Name>
                <Value>170</Value>
                <Error>10</Error>
                <LowerBound>-4000</LowerBound>
                <UpperBound>4000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>M2</Name>
                <Value>170</Value>
                <Error>10</Error>
                <LowerBound>100</LowerBound>
                <UpperBound>4000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>M3</Name>
                <Value>2600</Value>
                <Error>10</Error>
                <LowerBound>-4000</LowerBound>
                <UpperBound>4000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>MQ1</Name>
                <Value>2880</Value>
                <Error>10</Error>
                <LowerBound>300</LowerBound>
                <UpperBound>5000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>MQ3</Name>
                <Value>4360</Value>
                <Error>10</Error>
                <LowerBound>100</LowerBound>
                <UpperBound>5000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>ML1</Name>
                <Value>440</Value>
                <Error>10</Error>
                <LowerBound>100</LowerBound>
                <UpperBound>3000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>ML3</Name>
                <Value>440</Value>
                <Error>10</Error>
                <LowerBound>100</LowerBound>
                <UpperBound>4000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>MA0</Name>
                <Value>2070</Value>
                <Error>10</Error>
                <LowerBound>0</LowerBound>
                <UpperBound>4000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>A</Name>
                <Value>790</Value>
                <Error>10</Error>
                <LowerBound>-5000</LowerBound>
                <UpperBound>5000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>Mu</Name>
                <Value>550</Value>
                <Error>10</Error>
                <LowerBound>-5000</LowerBound>
                <UpperBound>5000</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>TanBeta</Name>
                <Value>37.6</Value>
                <Error>1</Error>
                <LowerBound>1</LowerBound>
                <UpperBound>60</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <ModelParameter>
                <Name>Mt</Name>
                <Value>173.3</Value>
                <Error>0.1</Error>
                <LowerBound>130</LowerBound>
                <UpperBound>215</UpperBound>
                <Fixed>false</Fixed>
            </ModelParameter>

            <Calculators>
                
                <FormulaCalculator>
                    <Prefix/>
                    <NonZerosRequired>true</NonZerosRequired>
                    <Quantity>
                        <Name>Bound_M3</Name>
                        <Value>TMath::Abs([M3])>400.</Value>
                    </Quantity>
                    <Quantity>
                        <Name>Bound_Mu</Name>
                        <Value>TMath::Abs([Mu])>100.</Value>
                    </Quantity>
                </FormulaCalculator>

                <SPhenoCalculator>

                    <Name>SPhenoCalculator</Name>

                    <Executable>@SPheno_EXECUTABLE@</Executable>
                    <InputFile>
                        <Template>@Fittino_INPUT_DIR@/external/SPheno/pMSSM11.slha</Template>
                        <Name>pMSSM11.slha</Name>
                        <Quantity>
                            <Name>[Minput]</Name>
                            <Value>[Minput]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[M1]</Name>
                            <Value>[M1]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[M2]</Name>
                            <Value>[M2]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[M3]</Name>
                            <Value>[M3]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[A]</Name>
                            <Value>[A]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[Mu]</Name>
                            <Value>[Mu]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[MA0]</Name>
                            <Value>[MA0]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[ML1]</Name>
                            <Value>[ML1]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[ML3]</Name>
                            <Value>[ML3]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[MQ1]</Name>
                            <Value>[MQ1]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[MQ3]</Name>
                            <Value>[MQ3]</Value>
                        </Quantity>
                        <Quantity>
                            <Name>[TanBeta]</Name>
                            <Value>[TanBeta]</Value>
                        </Quantity>
                    </InputFile>
                    <OutputFile>SPheno.spc</OutputFile>
                </SPhenoCalculator>
                
                <MinimumCalculator>
                    <Name>MassOfLSP</Name>
                    <Regex>SPheno.*Mass_~.*</Regex>
                </MinimumCalculator>
                
                <FormulaCalculator>
                    <Prefix/>
                    <NonZerosRequired>true</NonZerosRequired>
                    <Quantity>
                        <Name>NeutralinoLSP</Name>
                        <Value>[SPheno_Mass_~chi10]==[MassOfLSP_Value]</Value>
                    </Quantity>
                </FormulaCalculator>
                
                <Chi2Calculator>
                    <Name>Preselection</Name>
                    <Observable>
                        <Name>Mass_h0</Name>
                        <Prediction>[SPheno_Mass_h0]</Prediction>
                        <Measurement>110.</Measurement>
                        <Type>LowerLimit</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_H0</Name>
                        <Prediction>[SPheno_Mass_H0]</Prediction>
                        <Measurement>110.</Measurement>
                        <Type>LowerLimit</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_~chi1p</Name>
                        <Prediction>[SPheno_Mass_~chi1p]</Prediction>
                        <Measurement>103.5</Measurement>
                        <Type>LowerLimit</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_W</Name>
                        <Prediction>[SPheno_Mass_Wp]</Prediction>
                        <Measurement>80.385</Measurement>
                        <Uncertainty>
                            <Value>5*0.015</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*[Prediction]*0.1/100.</Value>
                        </Uncertainty>
                        <Type>Box</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_b_s_gamma</Name>
                        <Prediction>[SPheno_BR_b_s_gamma]</Prediction>
                        <Measurement>3.43e-4</Measurement>
                        <Uncertainty>
                            <Value>5*0.21e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*0.07e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*[Prediction]*14./100.</Value>
                        </Uncertainty>
                        <Type>Box</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_Bs_mu_mu</Name>
                        <Prediction>[SPheno_BR_Bs_mu_mu]</Prediction>
                        <Measurement>2.9e-9</Measurement>
                        <Uncertainty>
                            <Value>0.7e-9</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*[Prediction]*26./100.</Value>
                        </Uncertainty>
                        <Type>Box</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_Bu_tau_nu</Name>
                        <Prediction>[SPheno_BR_Bu_tau_nu]</Prediction>
                        <Measurement>1.05e-4</Measurement>
                        <Uncertainty>
                            <Value>5*0.25e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*[Prediction]*20./100.</Value>
                        </Uncertainty>
                        <Type>Box</Type>
                    </Observable>
                    <Observable>
                        <Name>Abs_Delta_Mass_Bs</Name>
                        <Prediction>[SPheno_Abs_Delta_Mass_Bs]</Prediction>
                        <Measurement>17.719</Measurement>
                        <Uncertainty>
                            <Value>5*0.036</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*0.023</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>5*[Prediction]*24./100.</Value>
                        </Uncertainty>
                        <Type>Box</Type>
                    </Observable>
                </Chi2Calculator>
                
                <FormulaCalculator>
                    <Prefix/>
                    <NonZerosRequired>false</NonZerosRequired>
                    <Quantity>
                        <Name>PreselectionPassed</Name>
                        <Value>[Preselection_Chi2]==0.</Value>
                    </Quantity>
                </FormulaCalculator>
                
                <Chi2Calculator>
                    <Name>LEO</Name>
                    <Observable>
                        <Name>Mass_h0</Name>
                        <Prediction>[SPheno_Mass_h0]</Prediction>
                        <Measurement>125.09</Measurement>
                        <Uncertainty>
                            <Value>0.21</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>0.11</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*2.4/100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_H0</Name>
                        <Prediction>[SPheno_Mass_H0]</Prediction>
                        <Measurement>110.</Measurement>
                        <Type>LowerLimit</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_~chi1p</Name>
                        <Prediction>[SPheno_Mass_~chi1p]</Prediction>
                        <Measurement>103.5</Measurement>
                        <Type>LowerLimit</Type>
                    </Observable>
                    <Observable>
                        <Name>Mass_W</Name>
                        <Prediction>[SPheno_Mass_Wp]</Prediction>
                        <Measurement>80.385</Measurement>
                        <Uncertainty>
                            <Value>0.015</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*0.1/100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_b_s_gamma</Name>
                        <Prediction>[SPheno_BR_b_s_gamma]</Prediction>
                        <Measurement>3.43e-4</Measurement>
                        <Uncertainty>
                            <Value>0.21e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>0.07e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*14./100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_Bs_mu_mu</Name>
                        <Prediction>[SPheno_BR_Bs_mu_mu]</Prediction>
                        <Measurement>2.9e-9</Measurement>
                        <Uncertainty>
                            <Value>0.7e-9</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*26./100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>BR_Bu_tau_nu</Name>
                        <Prediction>[SPheno_BR_Bu_tau_nu]</Prediction>
                        <Measurement>1.05e-4</Measurement>
                        <Uncertainty>
                            <Value>0.25e-4</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*20./100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>Abs_Delta_Mass_Bs</Name>
                        <Prediction>[SPheno_Abs_Delta_Mass_Bs]</Prediction>
                        <Measurement>17.719</Measurement>
                        <Uncertainty>
                            <Value>0.036</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>0.023</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*24./100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                    <Observable>
                        <Name>DiffSM_amu</Name>
                        <Prediction>[SPheno_DiffSM_amu]</Prediction>
                        <Measurement>28.7e-10</Measurement>
                        <Uncertainty>
                            <Value>8e-10</Value>
                        </Uncertainty>
                        <Uncertainty>
                            <Value>[Prediction]*7./100.</Value>
                        </Uncertainty>
                        <Type>Gauss</Type>
                    </Observable>
                </Chi2Calculator>
                
                <LHCNeuralNetCalculator>
                    <M1>[M1]</M1>
                    <M2>[M2]</M2>
                    <M3>[M3]</M3>
                    <MQ1>[MQ1]</MQ1>
                    <MQ3>[MQ3]</MQ3>
                    <ML1>[ML1]</ML1>
                    <ML3>[ML3]</ML3>
                    <MA0>[MA0]</MA0>
                    <TanBeta>[TanBeta]</TanBeta>
                    <Mu>[Mu]</Mu>
                    <A>[A]</A>
                </LHCNeuralNetCalculator>

                <SModelSCalculator>
                    <Name>SModelSCalculator</Name>
                    <SModelSToolsExecutable>@SModelS_Tools_EXECUTABLE@</SModelSToolsExecutable>
                    <FileName>SPheno.spc</FileName>
                    <ParameterFile>@Fittino_INPUT_DIR@/external/SModelS/parameters.ini</ParameterFile>
                </SModelSCalculator>

                <Chi2Calculator>
                    <Name>SModelS</Name>
                    <Observable>
                        <Name>Rvalue</Name>
                        <Measurement>0.8</Measurement>
                        <Uncertainty>
                            <Value>0.2</Value>
                        </Uncertainty>
                        <Prediction>[SModelSCalculator_RValue]</Prediction>
                        <Type>UpperLimit</Type>
                    </Observable>
                </Chi2Calculator>

            </Calculators>

            <Chi2Contribution>[LEO_Chi2]-[SCYNet_Chi2_Total]+[SModelS_Chi2]</Chi2Contribution>

        </ModelBase>

    </Model>

    <Tool>

        <MarkovChainSampler>
            <NumberOfIterations>3</NumberOfIterations>
            <FirstPointScaleFactor>1</FirstPointScaleFactor>
            <StrictBounds>true</StrictBounds>
        </MarkovChainSampler>

    </Tool>

</InputFile>

